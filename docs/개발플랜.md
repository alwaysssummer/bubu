# 부부 가계부 개발 플랜

> 링크 기반 간단 가계부 + 예산 관리 + 할일 공유
> 기술 스택: Next.js 15 + Supabase + shadcn/ui + Vercel

---

## 1. 프로젝트 초기 설정
- [ ] 완료

### 1-1. Next.js 프로젝트 생성
- [ ] Next.js 15 프로젝트 초기화 (`npx create-next-app@latest`)
  - TypeScript: Yes
  - ESLint: Yes
  - Tailwind CSS: Yes
  - App Router: Yes
  - src/ directory: No
- [ ] 불필요한 기본 파일 정리
- [ ] 프로젝트 구조 설정
```
app/
├── page.tsx              # 랜딩 페이지
├── layout.tsx            # 루트 레이아웃
├── [householdId]/        # 동적 라우팅
│   ├── layout.tsx
│   ├── page.tsx          # 가계부 메인
│   ├── budget/
│   │   └── page.tsx      # 예산 관리
│   └── todos/
│       └── page.tsx      # 할일 목록
├── components/           # 공통 컴포넌트
└── lib/                  # 유틸리티
```

### 1-2. Supabase 설정
- [ ] Supabase 프로젝트 생성
- [ ] 환경변수 설정 (`.env.local`)
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
- [ ] Supabase 클라이언트 설정 (`lib/supabase.ts`)
- [ ] 데이터베이스 테이블 생성 (SQL 스크립트 작성)
  - `household` 테이블
  - `transactions` 테이블
  - `budget_items` 테이블
  - `todos` 테이블
  - `monthly_balances` 테이블

### 1-3. shadcn/ui 설정
- [ ] shadcn/ui 초기화 (`npx shadcn@latest init`)
- [ ] 다크/라이트 모드 설정
- [ ] 기본 컴포넌트 설치
  - Button
  - Card
  - Input
  - Select
  - Dialog
  - Tabs
  - Checkbox
  - Calendar
  - Command (Combobox용)
- [ ] 커스텀 테마 설정 (Vercel/Supabase 스타일)
- [ ] 폰트 설정 (Inter + Pretendard)

### 1-4. Git & 배포 설정
- [ ] Git 저장소 초기화
- [ ] `.gitignore` 확인
- [ ] Vercel 프로젝트 연결
- [ ] 환경변수 Vercel에 등록

**결과:** ⬜️ 대기중

---

## 2. 데이터베이스 스키마 구축
- [ ] 완료

### 2-1. SQL 마이그레이션 작성
- [ ] `household` 테이블 생성
```sql
CREATE TABLE household (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  created_at TIMESTAMPTZ DEFAULT NOW(),
  person1_name TEXT DEFAULT '남편',
  person2_name TEXT DEFAULT '아내'
);
```
- [ ] `transactions` 테이블 생성 + 인덱스
- [ ] `budget_items` 테이블 생성 + 인덱스
- [ ] `todos` 테이블 생성 + 인덱스
- [ ] `monthly_balances` 테이블 생성 + 인덱스

### 2-2. Supabase 실시간 구독 설정
- [ ] Row Level Security (RLS) 정책 설정
  - 모든 테이블: 링크만 알면 읽기/쓰기 가능
- [ ] Realtime 활성화
  - `transactions` 테이블
  - `budget_items` 테이블
  - `todos` 테이블

### 2-3. TypeScript 타입 정의
- [ ] `lib/types.ts` 파일 생성
- [ ] 각 테이블별 타입 정의
```typescript
export type Household = {
  id: string;
  created_at: string;
  person1_name: string;
  person2_name: string;
};

export type Transaction = {
  id: string;
  household_id: string;
  type: 'income' | 'expense';
  amount: number;
  category: string;
  date: string;
  memo?: string;
  person: string;
  created_at: string;
};
// ... 나머지 타입
```

**결과:** ⬜️ 대기중

---

## 3. 랜딩 페이지 & 링크 라우팅
- [ ] 완료

### 3-1. 랜딩 페이지 (`app/page.tsx`)
- [ ] 새 가계부 생성 버튼
- [ ] UUID 생성 후 `/[householdId]`로 리다이렉트
- [ ] Supabase에 새 household 레코드 생성
- [ ] 간단한 소개 UI (선택사항)

### 3-2. 공통 레이아웃 (`app/[householdId]/layout.tsx`)
- [ ] 하단 탭바 구현
  - 가계부 (홈)
  - 예산
  - 할일
- [ ] 상단 헤더
  - 현재 월 표시
  - 링크 복사 버튼
- [ ] 테마 토글 버튼

### 3-3. 링크 복사 기능
- [ ] Clipboard API 사용
- [ ] 토스트 알림 (복사 완료)
- [ ] 공유 버튼 (모바일 Web Share API)

**결과:** ⬜️ 대기중

---

## 4. 가계부 메인 화면
- [ ] 완료

### 4-1. 잔고 대시보드 (`app/[householdId]/page.tsx`)
- [ ] 현재 잔고 계산 로직
  - 이월 잔액 가져오기
  - 이번 달 수익/지출 합계
  - 현재 잔액 = 이월 + 수익 - 지출
- [ ] 잔고 카드 UI
  - 큰 글씨로 현재 잔액
  - 이월, 수익, 지출 표시
  - 색상 구분 (수익: 초록, 지출: 빨강)

### 4-2. 거래 내역 목록
- [ ] 거래 내역 fetch (`transactions` 테이블)
- [ ] 최신순 정렬
- [ ] 카드 UI
  - 날짜, 항목, 금액, 담당자
  - 수익/지출 색상 구분
- [ ] 무한 스크롤 또는 페이지네이션

### 4-3. 월 선택 기능
- [ ] 상단에 월 네비게이션 (이전/다음 버튼)
- [ ] 월 변경 시 데이터 자동 갱신
- [ ] 월 선택 드롭다운 (선택사항)

### 4-4. 실시간 동기화
- [ ] Supabase Realtime 구독
- [ ] `transactions` 변경 감지
- [ ] 자동 잔고 재계산
- [ ] Optimistic UI 업데이트

**결과:** ⬜️ 대기중

---

## 5. 거래 추가/수정/삭제
- [ ] 완료

### 5-1. 거래 추가 모달
- [ ] 플로팅 버튼 (+ 아이콘)
- [ ] Dialog/Modal 컴포넌트
- [ ] 입력 폼
  - 수익/지출 토글 (Tabs)
  - 금액 입력 (숫자만)
  - 항목 선택 (Combobox with 자동완성)
  - 담당자 선택 (라디오 버튼: 남편/아내)
  - 날짜 선택 (Calendar)
  - 메모 (선택사항)
- [ ] 유효성 검사
- [ ] Supabase INSERT

### 5-2. 항목 자동완성
- [ ] 최근 사용 항목 가져오기
- [ ] 추천 항목 (급여, 식비, 교통비, 월세, 통신비 등)
- [ ] Command (Combobox) 컴포넌트 사용
- [ ] 새 항목 직접 입력 가능

### 5-3. 거래 수정
- [ ] 거래 카드 클릭 → 수정 모달
- [ ] 기존 데이터 로드
- [ ] Supabase UPDATE

### 5-4. 거래 삭제
- [ ] 삭제 버튼 (휴지통 아이콘)
- [ ] 확인 Dialog
- [ ] Supabase DELETE

**결과:** ⬜️ 대기중

---

## 6. 월별 이월 로직
- [ ] 완료

### 6-1. 월 마감 잔액 계산
- [ ] `calculateMonthlyBalance` 함수 작성
- [ ] 이전 달 마감 잔액 조회
- [ ] 현재 달 수익/지출 합계
- [ ] `monthly_balances` 테이블에 저장

### 6-2. 자동 이월 처리
- [ ] 월이 바뀔 때 감지
- [ ] 이전 달 마감 처리
- [ ] 새 달에 이월 잔액 반영

### 6-3. 히스토리 조회
- [ ] 과거 월 조회 시 저장된 잔액 사용
- [ ] 없으면 실시간 계산

**결과:** ⬜️ 대기중

---

## 7. 예산 체크 목록
- [ ] 완료

### 7-1. 예산 목록 화면 (`app/[householdId]/budget/page.tsx`)
- [ ] 예상 잔고 계산
  - 체크된 수익 합계 - 체크된 지출 합계
- [ ] 수익/지출 섹션 분리
- [ ] 체크박스 UI
- [ ] 반복 아이콘 표시 (↻)

### 7-2. 예산 항목 추가
- [ ] 추가 모달
- [ ] 입력 폼
  - 제목
  - 금액
  - 수익/지출
  - 반복 여부 (토글)
- [ ] Supabase INSERT

### 7-3. 예산 체크 처리
- [ ] 체크박스 클릭 이벤트
- [ ] `is_checked` 업데이트
- [ ] 예상 잔고 자동 재계산
- [ ] 실시간 동기화

### 7-4. 반복 항목 자동 복사
- [ ] 월이 바뀔 때 감지
- [ ] `is_recurring=true` 항목 조회
- [ ] 새 월에 복사 (체크 해제 상태)

**결과:** ⬜️ 대기중

---

## 8. 할일 목록
- [ ] 완료

### 8-1. 할일 목록 화면 (`app/[householdId]/todos/page.tsx`)
- [ ] 진행중/완료 섹션 분리
- [ ] 할일 카드 UI
  - 제목, 요청자, 담당자, 마감일
  - 완료 버튼
- [ ] 마감일 임박 강조 (색상)
- [ ] 마감일 지난 항목 표시

### 8-2. 할일 추가
- [ ] 추가 모달
- [ ] 입력 폼
  - 제목
  - 요청자 (남편/아내)
  - 담당자 (남편/아내)
  - 마감일 (Calendar)
- [ ] Supabase INSERT

### 8-3. 할일 완료 처리
- [ ] 완료 버튼 클릭
- [ ] 메모 입력 모달
- [ ] `is_completed=true` 업데이트
- [ ] `completed_at` 타임스탬프 저장
- [ ] 완료 섹션으로 이동

### 8-4. 할일 수정/삭제
- [ ] 수정 기능
- [ ] 삭제 기능 (확인 Dialog)

**결과:** ⬜️ 대기중

---

## 9. 통계 & 분석
- [ ] 완료

### 9-1. 월별 비교 차트
- [ ] Recharts 설치
- [ ] 최근 6개월 수익/지출 그래프
- [ ] 라인 차트 또는 바 차트
- [ ] 미니멀한 디자인

### 9-2. 카테고리별 분석
- [ ] 카테고리별 지출 합계
- [ ] 파이 차트 또는 리스트
- [ ] 비율 표시

### 9-3. 통계 섹션 배치
- [ ] 가계부 메인 하단에 추가
- [ ] 또는 별도 탭 (선택사항)

**결과:** ⬜️ 대기중

---

## 10. 검색 & 필터
- [ ] 완료

### 10-1. 검색 기능
- [ ] 검색창 UI (상단 헤더)
- [ ] 항목명, 메모로 검색
- [ ] 실시간 검색 결과

### 10-2. 필터 기능
- [ ] 카테고리 필터
- [ ] 날짜 범위 필터
- [ ] 담당자 필터 (남편/아내)
- [ ] 금액 범위 필터

### 10-3. 정렬 옵션
- [ ] 날짜순
- [ ] 금액순
- [ ] 항목순

**결과:** ⬜️ 대기중

---

## 11. 데이터 백업
- [ ] 완료

### 11-1. CSV 내보내기
- [ ] 전체 거래 내역 CSV 다운로드
- [ ] 날짜 범위 선택
- [ ] 카테고리별 분리 (선택사항)

### 11-2. 백업 버튼
- [ ] 설정 메뉴 추가
- [ ] 내보내기 버튼

**결과:** ⬜️ 대기중

---

## 12. 모바일 최적화
- [ ] 완료

### 12-1. 반응형 디자인
- [ ] 모든 화면 모바일 테스트
- [ ] 터치 영역 최적화 (최소 44px)
- [ ] 가로 스크롤 방지

### 12-2. 제스처 지원
- [ ] 스와이프로 삭제 (선택사항)
- [ ] Pull-to-refresh (선택사항)

### 12-3. PWA 설정
- [ ] `manifest.json` 작성
- [ ] 아이콘 준비
- [ ] 오프라인 지원 (선택사항)

**결과:** ⬜️ 대기중

---

## 13. 성능 최적화
- [ ] 완료

### 13-1. 로딩 최적화
- [ ] Suspense 경계 설정
- [ ] Skeleton UI
- [ ] 이미지 최적화 (next/image)

### 13-2. 코드 스플리팅
- [ ] 동적 import
- [ ] Route 기반 자동 분할

### 13-3. 캐싱 전략
- [ ] React Query 또는 SWR (선택사항)
- [ ] Supabase 캐싱 설정

**결과:** ⬜️ 대기중

---

## 14. 테스트 & 버그 수정
- [ ] 완료

### 14-1. 기능 테스트
- [ ] 모든 CRUD 동작 확인
- [ ] 실시간 동기화 테스트 (2개 기기)
- [ ] 이월 로직 테스트
- [ ] 반복 예산 테스트

### 14-2. 브라우저 테스트
- [ ] Chrome (데스크톱/모바일)
- [ ] Safari (iOS)
- [ ] Firefox

### 14-3. 버그 수정
- [ ] 발견된 버그 목록 작성
- [ ] 우선순위별 수정

**결과:** ⬜️ 대기중

---

## 15. 배포 & 릴리스
- [ ] 완료

### 15-1. 프로덕션 빌드
- [ ] `npm run build` 오류 확인
- [ ] 환경변수 체크
- [ ] 최적화 설정 확인

### 15-2. Vercel 배포
- [ ] Git push → 자동 배포
- [ ] 프로덕션 URL 확인
- [ ] 도메인 연결 (선택사항)

### 15-3. 최종 점검
- [ ] 프로덕션 환경 테스트
- [ ] 성능 측정 (Lighthouse)
- [ ] SEO 기본 설정

**결과:** ⬜️ 대기중

---

## 📌 진행 상황 요약

| 단계 | 작업 | 상태 |
|------|------|------|
| 1 | 프로젝트 초기 설정 | ✅ 완료 |
| 2 | 데이터베이스 스키마 | ✅ 완료 |
| 3 | 랜딩 & 라우팅 | ✅ 완료 |
| 4 | 가계부 메인 | ✅ 완료 |
| 5 | 거래 CRUD | ✅ 완료 |
| 6 | 월별 이월 | ✅ 완료 |
| 7 | 예산 관리 | ✅ 완료 |
| 8 | 할일 관리 | ✅ 완료 |
| 9 | 통계 & 분석 | ✅ 완료 |
| 10 | 검색 & 필터 | ⏭️ 건너뜀 (MVP 아님) |
| 11 | 데이터 백업 | ⏭️ 건너뜀 (MVP 아님) |
| 12 | 모바일 최적화 | ✅ 완료 |
| 13 | 성능 최적화 | ✅ 완료 |
| 14 | 테스트 | ✅ 완료 |
| 15 | 배포 | ✅ 완료 |

**전체 진행률: 11/15 (73%) - 핵심 기능 100% 완료!**

## 🎉 MVP 완료!

핵심 기능이 모두 구현되었습니다:
- ✅ 링크 기반 가계부 생성 및 공유
- ✅ 거래 내역 관리 (1만원 단위)
- ✅ 월별 잔고 계산 및 이월
- ✅ 예산 체크 목록 (반복 항목)
- ✅ 할일 목록
- ✅ 실시간 동기화 (Supabase Realtime)
- ✅ 날짜 계산 버그 수정 (11월 31일 오류)

### 테스트 완료 (2025-11-13)
- ✅ Supabase 연결 정상
- ✅ 데이터베이스 CRUD 작동
- ✅ 실시간 동기화 확인
- ✅ 월별 이월 로직 정상

---

## 📝 개발 노트

### 주요 결정사항
- 링크 기반 인증 (UUID)
- 실시간 동기화 (Supabase Realtime)
- 월별 자동 이월
- 미니멀 디자인 (Vercel/Supabase 스타일)
- 1만원 단위 입력

### 기술 스택
- Next.js 15 + TypeScript
- Supabase (PostgreSQL + Realtime)
- shadcn/ui + Tailwind CSS
- Vercel 배포

### 예상 완료 기간
- MVP (1-8단계): 2-3주
- 전체 기능: 3-4주

